\section{СМО}


\subsection*{Общая теория}

СМО - система массового обслуживания.

Три типа задач:
$M|M|n|0$, $M|M|n|\infty$, $M|M|n|m$.

Где $M$ - пуассоновский поток заявок,
$M$ - экспоненциальное время обслуживания,
$n$ - число каналов обслуживаниея,
$m$ - ёмкость системы.

Где $m=0$ - нет очереди,
$m=\infty$ - неограниченная очередь,
$m=m$ - ограченная очередь на $m$ мест.

$\lambda$ - интенсивность входного потока заявок,
$\mu$ - интенсивность обслуживания одним прибором,
$\rho=\frac{\lambda}{\mu}$ - приведённая нагрузка системы,
$\nu=\frac{\rho}{n}=\frac{\lambda}{n\mu}$ - коэффициент загрузки системы.

Термины:
$P_{\text{отк}}$ - вероятность отказа,
$Q$ - относительная пропускная способность, \\
$A$ - абсолютная пропускная способность,
$\bar{k}$ - среднее число занятых приборов,
$\bar{r}$ - среднее число заявок в очереди,
$\bar{z}$ - среднее число заявок в системе,
$\bar{t}_{\text{оч}}$ - среднее время ожидания,
$\bar{t}_{\text{СМО}}$-  среднее время в системе.

\renewcommand{\arraystretch}{1.3}
\begin{table}[h]
	\centering
	\begin{tabular}{c|c|c|c}
		                       & $(M|M|n|0)$                                         & $(M|M|n|\infty)$, $\nu<1$                                                                                         & $(M|M|n|m)$                                                                                                                \\
		\hline
		$r_0$                  & $\left(\sum_{k=0}^{n}\frac{\rho^k}{k!}\right)^{-1}$ & $\left(\sum_{k=0}^{n-1}\frac{\rho^k}{k!}+\frac{\rho^n}{n!}\frac{1}{1-\nu}\right)^{-1}$                            & $\left(\sum_{k=0}^{n}\frac{\rho^k}{k!}+\frac{\rho^n}{n!}\sum_{j=1}^{m}\nu^j\right)^{-1}$                                   \\
		\hline
		$P_{\text{отк}}$       & $r_n=\frac{\rho^n}{n!}r_0$                          & $0$                                                                                                               & $r_{n+m}=\nu^m \frac{\rho^n}{n!}r_0$                                                                                       \\
		\hline
		$Q$                    & $P_{\text{обсл}}=1-P_{\text{отк}}$                  & $P_{\text{обсл}}=1-P_{\text{отк}}=1$                                                                              & $P_{\text{обсл}}=1-P_{\text{отк}}$                                                                                         \\
		\hline
		$A$                    & $\lambda Q$                                         & $\lambda Q=\lambda$                                                                                               & $\lambda Q$                                                                                                                \\
		\hline
		$\bar{k}$              & $\rho Q$                                            & $\rho Q=\rho$                                                                                                     & $\rho Q$                                                                                                                   \\
		\hline
		$\bar{r}$              & $0$                                                 & $\nu \frac{r_n}{(1-\nu)^2}$                                                                                       & $\frac{\rho^n}{n!}r_0 \sum_{j=1}^{m} j \nu^j=\frac{\rho^n}{n!}r_0 \frac{\nu(1-(m+1)\nu^m + m\nu^{m+1})}{(1-\nu)^2}$        \\
		\hline
		$\bar{z}$              & $\bar{k}+\bar{r}=\bar{k}$                           & $\bar{k}+\bar{r}$                                                                                                 & $\bar{k}+\bar{r}$                                                                                                          \\
		\hline
		$\bar{t}_{\text{оч}}$  & $\frac{\bar{r}}{\lambda}=0$                         & $\frac{\bar{r}}{\lambda}$                                                                                         & $\frac{\bar{r}}{\lambda}$                                                                                                  \\
		\hline
		$\bar{t}_{\text{СМО}}$ & $\frac{\bar{z}}{\lambda}=\frac{\bar{k}}{\lambda}$   & $\frac{\bar{z}}{\lambda}$                                                                                         & $\frac{\bar{z}}{\lambda}$                                                                                                  \\
		\hline
		$r_k$                  & $\frac{\rho^k}{k!} r_0, k=0,1,...n$                 & $\begin{cases} \frac{\rho^k}{k!} r_0, & 0 \leq k \leq n, \\ \frac{\rho^n}{n!} \nu^{k-n} r_0, & k > n,\end{cases}$ & $\begin{cases} \frac{\rho^k}{k!} r_0, & 0 \leq k \leq n, \\ \frac{\rho^n}{n!} \nu^{k-n} r_0, & n < k \leq n+m,\end{cases}$ \\
		\hline
		$P_{\text{зан}}$       & $r_n=\frac{\rho^n}{n!}r_0$                          & $\frac{\rho^n}{n!}\frac{r_0}{1-\nu}=1-\sum_{k=0}^{n-1}\frac{\rho^k}{k!}r_0$                                       & $\sum_{k=n}^{n+m} r_k = \frac{\rho^n}{n!}r_0 \sum_{j=0}^{m} \nu^j=\frac{\rho^n}{n!} r_0 \frac{1-\nu^{m+1}}{1-\nu}$         \\
		\hline
	\end{tabular}
\end{table}

\begin{table}[h]
	\centering
	\begin{tabular}{c|c|c|c}
		                       & $(M|M|1|0)$                                                             & $(M|M|1|\infty)$, $\nu<1$                          & $(M|M|1|m)$                                                                           \\
		\hline
		$r_0$                  & $(1+\rho)^{-1}$                                                         & $1-\rho$                                           & $\frac{1-\rho}{1-\rho^{m+2}}$                                                         \\
		\hline
		$P_{\text{отк}}$       & $\rho r_0= \frac{\rho}{1+\rho}$                                         & $0$                                                & $\rho_{m+1}=\rho^{m+1}r_0=\frac{(1-\rho)\rho^{m+1}}{1-\rho^{m+2}}$                    \\
		\hline
		$Q$                    & $P_{\text{обсл}}=1-P_{\text{отк}}=\frac{1}{1+\rho}$                     & $P_{\text{обсл}}=1-P_{\text{отк}}=1$               & $P_{\text{обсл}}=1-P_{\text{отк}}$                                                    \\
		\hline
		$A$                    & $\lambda Q = \frac{\lambda}{1+\rho}$                                    & $\lambda Q=\lambda$                                & $\lambda Q $                                                                          \\
		\hline
		$\bar{k}$              & $\rho Q = \frac{\rho}{1+\rho}$                                          & $\rho Q=\rho$                                      & $\rho Q$                                                                              \\
		\hline
		$\bar{r}$              & $0$                                                                     & $\frac{\rho^2}{1-\rho}$                            & $r_0 \sum_{j=1}^{m} j \rho^j = r_0\frac{\rho(1-(m+1)\rho^m+m\rho^{m+1})}{(1-\rho)^2}$ \\
		\hline
		$\bar{z}$              & $\bar{k}+\bar{r}=\bar{k}$                                               & $\bar{k}+\bar{r}=\frac{\rho}{1-\rho}$              & $\bar{k}+\bar{r}$                                                                     \\
		\hline
		$\bar{t}_{\text{оч}}$  & $\frac{\bar{r}}{\lambda}=0$                                             & $\frac{\bar{r}}{\lambda}=\frac{\rho}{\mu(1-\rho)}$ & $\frac{\bar{r}}{\lambda}$                                                             \\
		\hline
		$\bar{t}_{\text{СМО}}$ & $\frac{\bar{z}}{\lambda}=\frac{\bar{k}}{\lambda}=\frac{1}{\mu(1+\rho)}$ & $\frac{\bar{z}}{\lambda}=\frac{1}{\mu(1-\rho)}$    & $\frac{\bar{z}}{\lambda}$                                                             \\
		\hline
		$P_{\text{зан}}$       & $r_1=\frac{\rho}{1+\rho}$                                               & $\rho$                                             & $1-r_0=\frac{\rho(1-\rho^{m+1})}{1-\rho^{m+2}}$                                       \\
		\hline
	\end{tabular}
\end{table}


\newpage
\subsection*{Задачи}

\begin{problem}

\begin{condition}
	(01.4)

	В СМО $(M|M|2|2)$ интенсивность прихода заявок $\lambda=2$ в час,
	среднее время обслуживания каждой заявки $T_{\text{обсл}}=15$ мин.
	Найти среднее число занятых приборов.
\end{condition}

\begin{solution}
	$(M|M|2|2)$

	$\lambda=2$,
	$\mu=\frac{1}{T_{\text{обсл}}}=4$ клиента в час,
	$\rho=\frac{\lambda}{\mu}=\frac{1}{2}$,
	$\nu=\frac{\lambda}{n\mu}=\frac{2}{2\cdot 4}=\frac{1}{4}$

	$$
		\begin{aligned}
			r_0 & =\left(
			\sum_{k=0}^{n}\frac{\rho^k}{k!}+\frac{\rho^n}{n!}\sum_{j=1}^{m}\nu^j
			\right)^{-1}
			=\left(
			\sum_{k=0}^{2}\frac{\rho^k}{k!}+\frac{\rho^2}{n!}\sum_{j=1}^{2}\nu^j
			\right)^{-1}
			\\ & = \left(
			1 + \rho + \frac{\rho^2}{2} + \frac{\rho^2}{2}(\nu+\nu^2)
			\right)^{-1}
			=\left(
			1 + \frac{1}{2} + \frac{1}{8} + \frac{1}{8}\left(\frac{1}{4} + \frac{1}{16}\right)
			\right)^{-1}
			\\ & = \frac{128}{213}
		\end{aligned}
	$$

	$$
		r_{n+m}=r_{4}=\nu^m \frac{\rho^n}{n!}r_0
		=\frac{1}{4}^2 \frac{\frac{1}{2}^2}{2!} \frac{128}{213}
		= \frac{1}{213}
	$$

	Относительная  пропускная способность $Q$

	$$
		Q=P_{\text{обсл}}=1-P_{\text{отк}}=1-r_{n+m}
		= 1 - \frac{1}{213}
		= \frac{212}{213}
	$$

	Среднее число занятых приборов $\bar{k}$

	$$
		\bar{k}=\rho Q
		= \frac{1}{2} \frac{212}{213}
		= \frac{106}{213}
	$$

\end{solution}

\begin{conclusion}

	$$
		\bar{k} = \frac{106}{213}
	$$
\end{conclusion}

\end{problem}



\begin{problem}

\begin{condition}
	(27.5)

	В парихмахерской задачи работают 2 мастера,
	в холле имеются 3 кресла для ожидающих обслуживания клиентов.
	В среднем один мастер обслуживает одного клиента 30 минут.
	Среднее число клиентов в час равно 4.
	Найти вероятность того, что в момент прихода клиента все мастера будут заняты.
\end{condition}

\begin{solution}

	$(M|M|2|3)$,
	$T_{\text{обсл}}=30$ минут,
	$\mu=\frac{1}{T_{\text{обсл}}}=2$ клиента в час,
	$\lambda=4$,
	$\rho=\frac{\lambda}{\mu}=2$,
	$\nu=\frac{\lambda}{n\mu}=1$.

	$$
		\begin{aligned}
			r_0 & =\left(
			\sum_{k=0}^{n}\frac{\rho^k}{k!}+\frac{\rho^n}{n!}\sum_{j=1}^{m}\nu^j
			\right)^{-1}
			=\left(
			\sum_{k=0}^{2}\frac{\rho^k}{k!}+\frac{\rho^2}{n!}\sum_{j=1}^{3}\nu^j
			\right)^{-1}
			\\ & = \left(
			1 + \rho + \frac{\rho^2}{2} + \frac{\rho^2}{2}(\nu+\nu^2+\nu^3)
			\right)^{-1}
			=\left(
			1+2+2+2(1+1+1)
			\right)^{-1}
			\left(
			11
			\right)^{-1}
			= \frac{1}{11}
		\end{aligned}
	$$

	$$P_{\text{зан}}=\sum_{k=n}^{n+m} r_k
		= \frac{\rho^n}{n!}r_0 \sum_{j=0}^{m} \nu^j
		= \frac{2^2}{2} \frac{1}{11} \sum_{j=0}^{3} 1^j
		= 2 \frac{1}{11} 4
		= \frac{8}{11}
	$$

\end{solution}

\begin{conclusion}

	$$P_{\text{зан}} = \frac{8}{11}$$
\end{conclusion}

\end{problem}



\begin{problem}

\begin{condition}
	(51.8)

	В парихмахерской работают 5 мастеров.
	В среднем один мастер обслуживает одного клиента 20 минут.
	В среднем приходит 3 клиента в час.
	Если все мастера заняты, то клиент уходит.
	Найти вероятность того, что в момент прихода клиента не менее трёх мастеров будут свободны.
\end{condition}

\begin{solution}

	$(M|M|5|0)$,
	$T_{\text{обсл}}=20$ минут,
	$\mu=\frac{1}{T_{\text{обсл}}}=3$ клиента в час,
	$\lambda=3$,
	$\rho=\frac{\lambda}{\mu}=1$,

	$$
		\begin{aligned}
			r_0 & =\left(
			\sum_{k=0}^{n}\frac{\rho^k}{k!}
			\right)^{-1}
			=\left(
			\sum_{k=0}^{5}\frac{\rho^k}{k!}
			\right)^{-1}
			\\ & = \left(
			1 + 1+ \frac{1}{2} + \frac{1}{6} + \frac{1}{24} + \frac{1}{120}
			\right)^{-1}
			\   & = \left(
			\frac{163}{60}
			\right)^{-1}
			= \frac{60}{163}
		\end{aligned}
	$$

	$$
		r_1=\frac{\rho^k}{k!} r_0
		= \frac{1^1}{1!} \frac{60}{163}
		= \frac{60}{163}
	$$

	$$
		r_2=\frac{\rho^k}{k!} r_0
		= \frac{1^2}{2!} \frac{60}{163}
		= \frac{30}{163}
	$$

	$$P_{\text{зан} \leq 3}=r_0 +r_1 +r_2
		= \frac{60}{163} + \frac{60}{163} + \frac{30}{163}
		= \frac{150}{163}
	$$
\end{solution}

\begin{conclusion}

	$$P_{\text{зан} \leq 3}= \frac{150}{163}$$
\end{conclusion}

\end{problem}



\begin{problem}

\begin{condition}
	(2.5)

	В СМО $(M|M|2|2)$ интенсивность прихода заявок $\lambda=3$ в час,
	среднее время обслуживания одной заявки $T=20$ минут.
	Найти среднее число занятых приборов.
\end{condition}

\begin{solution}

	$(M|M|2|2)$

	$\lambda=3$,
	$\mu=\frac{1}{T_{\text{обсл}}}=3$ клиента в час,
	$\rho=\frac{\lambda}{\mu}=1$,
	$\nu=\frac{\lambda}{n\mu}=\frac{1}{2}$

	$$
		\begin{aligned}
			r_0 & =\left(
			\sum_{k=0}^{n}\frac{\rho^k}{k!}+\frac{\rho^n}{n!}\sum_{j=1}^{m}\nu^j
			\right)^{-1}
			=\left(
			\sum_{k=0}^{2}\frac{\rho^k}{k!}+\frac{\rho^2}{n!}\sum_{j=1}^{2}\nu^j
			\right)^{-1}
			\\ & = \left(
			1 + \rho + \frac{\rho^2}{2} + \frac{\rho^2}{2}(\nu+\nu^2)
			\right)^{-1}
			=\left(
			1 + 1 + \frac{1}{2} + \frac{1}{2}\left(\frac{1}{2} + \frac{1}{4}\right)
			\right)^{-1}
			\\ & =\left(
			\frac{23}{8}
			\right)^{-1}
			=\frac{8}{23}
		\end{aligned}
	$$

	$$
		r_{n+m}=r_{4}=\nu^m \frac{\rho^n}{n!}r_0
		=\frac{1}{2}^2 \frac{1^2}{2!} \frac{8}{23}
		= \frac{1}{23}
	$$

	Относительная  пропускная способность $Q$

	$$
		Q=P_{\text{обсл}}=1-P_{\text{отк}}=1-r_{n+m}
		= 1 - \frac{1}{23}
		= \frac{22}{23}
	$$

	Среднее число занятых приборов $\bar{k}$

	$$
		\bar{k}=\rho Q
		= 1 \frac{22}{23}
		= \frac{22}{23}
	$$


\end{solution}

\begin{conclusion}

	$$\bar{k}= \frac{22}{23}$$
\end{conclusion}

\end{problem}



\begin{problem}

\begin{condition}
	(31.5)

	У входа на стадион работает одна касса.
	В среднем подходят 300 болельщиков в час.
	Среднее врямя покупки билета составляет 10 секунд.
	Найти среднюю длину очереди.
\end{condition}

\begin{solution}

	$(M|M|1|\infty)$,
	$T_{\text{обсл}}=10 \text{сек}=\frac{1}{6} \text{мин} = \frac{1}{360} \text{час}$ ,
	$\mu=\frac{1}{T_{\text{обсл}}}=360 \text{клиентов в час}$,
	$\lambda=300$,
	$\rho=\frac{\lambda}{\mu}=\frac{300}{360}=\frac{5}{6}$,

	$$
		\bar{r} = \frac{\rho^2}{1-\rho}
		= \frac{(\frac{5}{6})^2}{1-\frac{5}{6}}
		= \frac{\frac{25}{36}}{\frac{1}{6}}
		= \frac{25}{6}
	$$
\end{solution}

\begin{conclusion}

	$$\bar{r} = \frac{25}{6}$$
\end{conclusion}

\end{problem}



\begin{problem}

\begin{condition}
	(45.3)

	Найти среднее время нахождения заявки в СМО $(M|M|2)$,
	если за час поступает в среднем 9 заявок,
	а одна заявка обслуживается в среднем 12 минут.
\end{condition}

\begin{solution}

	$(M|M|2|\infty)$,
	$T_{\text{обсл}}=12 \text{мин} = \frac{1}{5} \text{час}$ ,
	$\mu=\frac{1}{T_{\text{обсл}}}=5 \text{клиентов в час}$,
	$\lambda=9$,
	$\rho=\frac{\lambda}{\mu}=\frac{9}{5}$,
	$\nu=\frac{\lambda}{n \mu} = \frac{9}{10}$

	$$
		\begin{aligned}
			r_0 & =\left(
			\sum_{k=0}^{n-1}\frac{\rho^k}{k!}+\frac{\rho^n}{n!}\frac{1}{1-\nu}
			\right)^{-1}
			=\left(
			\sum_{k=0}^{1}\frac{\rho^k}{k!}+\frac{\rho^2}{2!}\frac{1}{1-\nu}
			\right)^{-1}
			=\left(
			1+ \rho + \frac{\rho^2}{2}\frac{1}{1-\nu}
			\right)^{-1}
			\\ & =\left(
			1+ \frac{9}{5} + \frac{\frac{9}{5}^2}{2}\frac{1}{1-\frac{9}{10}}
			\right)^{-1}
			=\left(
			19
			\right)^{-1}
			=\frac{1}{19}
		\end{aligned}
	$$

	$$
		r_n=\frac{\rho^n}{n!}r_0
		=\frac{\frac{9}{5}^2}{2!} \frac{1}{19}
		=\frac{81}{950}
	$$

	$$
		\bar{k}=\rho
		=\frac{9}{5}
	$$

	$$
		\bar{r}=\nu \frac{r_n}{(1-\nu^2)}
		=\frac{9}{10} \frac{\frac{81}{950}}{(1-\frac{9}{10})^2}
		=\frac{729}{95}
	$$

	$$
		\bar{z}=\bar{k}+ \bar{r}
		=\frac{9}{5} + \frac{729}{95}
		= \frac{180}{19}
	$$

	$$
		\bar{t}_{\text{СМО}}=\frac{\bar{z}}{\lambda}
		= \frac{\frac{180}{19}}{9}
		= \frac{20}{19}
	$$
\end{solution}

\begin{conclusion}

	$$\bar{t}_{\text{СМО}}=\frac{20}{19}$$
\end{conclusion}

\end{problem}



\begin{problem}

\begin{condition}
	(43.3)

	Клиент использует банкомат в сренем 3 минуты.
	За час к банкомату подходят в среднем 18 клиентов.
	Найти среднее время, которое клиент проводит в очереди,
	при условии, что поток клиентов пуассоновский,
	а время обслуживания распределено по показательному обслуживанию.
\end{condition}

\begin{solution}

\end{solution}

\begin{conclusion}

\end{conclusion}

\end{problem}



\begin{problem}

\begin{condition}
	(22.2)

	Клиент использует банкомат в среднем 3 минуты.
	За час к банкомату подходят в среднем 20 клиентов.
	Если в очереди уже стоят 8 человек, то клиент уходит.
	Найти среднее время пребывания клиента в очереди.
\end{condition}

\begin{solution}

\end{solution}

\begin{conclusion}

\end{conclusion}

\end{problem}



\begin{problem}

\begin{condition}
	(01.7)

	Найти среднее время пребывания заявки в СМО $(M|M|2)$,
	если в СМО в всреднем поступает 60 заявок в час,
	а среднее время обслуживания одним прибором одной заявки равно 1 минуте.
\end{condition}

\begin{solution}

\end{solution}

\begin{conclusion}

\end{conclusion}

\end{problem}



\begin{problem}

\begin{condition}
	(3.1)

	У входа на стадион работает одна касса.
	В среднем подходят 120 болельщиков в час.
	Найти среднее время покупки билета, если вероятность того,
	что перед кассой стоит только один болельших, равна $\frac{2}{9}$.
\end{condition}

\begin{solution}

\end{solution}

\begin{conclusion}

\end{conclusion}

\end{problem}



\begin{problem}

\begin{condition}
	(42.3)

	В СМО $(M|M|3|0)$ поступает за час в среднем 8 заявок,
	одна заявка обслуживается в среднем 15 минут.
	Построить граф СМО, найти среднее число занятых приборов.
\end{condition}

\begin{solution}

\end{solution}

\begin{conclusion}

\end{conclusion}

\end{problem}